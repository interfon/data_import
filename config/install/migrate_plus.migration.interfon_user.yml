id: interfon_user
label: 'Interfon user migration'
status: true
dependencies:
    enforced:
        module:
            - interfon_data_import

source:
    plugin: csv
    track_changes: true
    path: modules/custom/interfon_data_import/data/users.csv
    header_row_count: 1
    keys:
      - email

    column_names:
      - status: status
      - email: email
      - password: user password
      - title: salutation
      - first: user's first name
      - last: user's last name
      - function: user's Interfon function
      - committee: Interfon committees the user belongs to

process:
    name: email
    mail: email
    pass: email
    status: status
    field_user_title: title
    field_first_name: first
    field_last_name: last
#    init: init
#    field_department:
#        plugin: skip_on_empty
#        method: process
#        source: tid

destination:
    plugin: entity:user

migration_dependencies:
    required:
      - interfon_committee
    optional: {}
